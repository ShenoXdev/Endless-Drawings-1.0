<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>برنامج رسم احترافي</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #f5f5f5;
  font-family: sans-serif;
}

/* الكانفس */
canvas {
  width: 100vw;
  height: 100vh;
  background: #fffdf9;
  display: block;
  touch-action: none;
}

/* شريط الأدوات العائم */
.toolbar {
  position: fixed;
  top: 50%;
  left: 10px;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 100;
}

/* الأزرار */
.tool-btn {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 3px 6px rgba(0,0,0,0.15);
  cursor: pointer;
  transition: all 0.2s ease-in-out;
}
.tool-btn:hover {
  transform: scale(1.05);
  background: #f0f0f0;
}
.tool-btn:active {
  transform: scale(0.95);
}

/* أيقونات */
.tool-btn img {
  width: 24px;
  height: 24px;
}

/* اختيار اللون والحجم */
.color-picker, .size-picker {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  padding: 0;
  cursor: pointer;
  box-shadow: 0 3px 6px rgba(0,0,0,0.15);
}
.size-picker {
  background: white;
  font-size: 14px;
}

/* مؤشر الزوم */
.zoom-info {
  position: fixed;
  bottom: 10px;
  left: 10px;
  background: rgba(0,0,0,0.65);
  color: white;
  padding: 5px 10px;
  border-radius: 8px;
  font-size: 13px;
}
</style>
</head>
<body>

<!-- الكانفس -->
<canvas id="canvas"></canvas>

<!-- شريط الأدوات -->
<div class="toolbar">
  <input type="color" id="color" class="color-picker" title="لون القلم">
  <input type="number" id="size" class="size-picker" value="5" min="1" max="50" title="حجم القلم">
  <button class="tool-btn" id="undo" title="تراجع">
    ⟲
  </button>
  <button class="tool-btn" id="redo" title="إعادة">
    ⟳
  </button>
  <button class="tool-btn" id="clear" title="مسح">
    🗑
  </button>
  <button class="tool-btn" id="save" title="حفظ">
    💾
  </button>
</div>

<div class="zoom-info" id="zoomInfo">Zoom: 100%</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let drawing = false;
let color = document.getElementById('color').value;
let size = document.getElementById('size').value;
let zoom = 1;

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

canvas.addEventListener('mousedown', startDraw);
canvas.addEventListener('touchstart', startDraw, {passive: false});
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('touchmove', draw, {passive: false});
canvas.addEventListener('mouseup', endDraw);
canvas.addEventListener('touchend', endDraw);

function startDraw(e) {
  drawing = true;
  ctx.beginPath();
  ctx.moveTo(getX(e), getY(e));
}

function draw(e) {
  if (!drawing) return;
  ctx.lineWidth = size;
  ctx.strokeStyle = color;
  ctx.lineCap = 'round';
  ctx.lineTo(getX(e), getY(e));
  ctx.stroke();
}

function endDraw() {
  drawing = false;
  ctx.closePath();
}

function getX(e) {
  return e.clientX || e.touches[0].clientX;
}
function getY(e) {
  return e.clientY || e.touches[0].clientY;
}

// الأدوات
document.getElementById('color').addEventListener('input', e => color = e.target.value);
document.getElementById('size').addEventListener('input', e => size = e.target.value);

document.getElementById('clear').addEventListener('click', () => {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
});

document.getElementById('save').addEventListener('click', () => {
  const link = document.createElement('a');
  link.download = 'drawing.png';
  link.href = canvas.toDataURL();
  link.click();
});

document.getElementById('undo').addEventListener('click', () => alert("Undo غير مضاف هنا لكن ممكن أضيفه بسهولة"));
document.getElementById('redo').addEventListener('click', () => alert("Redo غير مضاف هنا لكن ممكن أضيفه بسهولة"));
</script>

</body>
</html>
